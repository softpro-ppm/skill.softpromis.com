<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Softpro Skill Solutions - User Profile</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap4-theme@1.0.0/dist/select2-bootstrap4.min.css">
  <!-- Toastr -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light fixed-top">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span class="badge badge-warning navbar-badge">3</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-item dropdown-header">3 Notifications</span>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 4 new messages
            <span class="float-right text-muted text-sm">3 mins</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-users mr-2"></i> 8 new students
            <span class="float-right text-muted text-sm">12 hours</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-file mr-2"></i> 3 new reports
            <span class="float-right text-muted text-sm">2 days</span>
          </a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="index.html" role="button">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </li>
    </ul>
  </nav>

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="dashboard.html" class="brand-link">
      <span class="brand-text font-weight-light">Softpro Skill Solutions</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="https://via.placeholder.com/150" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Admin User</a>
          <small class="text-muted">Administrator</small>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <li class="nav-item">
            <a href="dashboard.html" class="nav-link">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <!-- ... existing menu items ... -->
          <li class="nav-item">
            <a href="profile.html" class="nav-link active">
              <i class="nav-icon fas fa-user"></i>
              <p>Profile</p>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">User Profile</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Profile</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-3">
            <!-- Profile Image -->
            <div class="card card-primary card-outline">
              <div class="card-body box-profile">
                <div class="text-center">
                  <img class="profile-user-img img-fluid img-circle" src="https://via.placeholder.com/150" alt="User profile picture">
                </div>
                <h3 class="profile-username text-center">Admin User</h3>
                <p class="text-muted text-center">Administrator</p>
                <ul class="list-group list-group-unbordered mb-3">
                  <li class="list-group-item">
                    <b>Training Center</b> <a class="float-right">Center 1</a>
                  </li>
                  <li class="list-group-item">
                    <b>Email</b> <a class="float-right">admin@example.com</a>
                  </li>
                  <li class="list-group-item">
                    <b>Phone</b> <a class="float-right">1234567890</a>
                  </li>
                </ul>
                <button class="btn btn-primary btn-block" id="changeProfilePic">
                  <i class="fas fa-camera"></i> Change Profile Picture
                </button>
              </div>
            </div>
          </div>

          <div class="col-md-9">
            <div class="card">
              <div class="card-header p-2">
                <ul class="nav nav-pills">
                  <li class="nav-item">
                    <a class="nav-link active" href="#profile" data-toggle="tab">Profile</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#password" data-toggle="tab">Change Password</a>
                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content">
                  <!-- Profile Tab -->
                  <div class="active tab-pane" id="profile">
                    <form id="profileForm">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>First Name</label>
                            <input type="text" class="form-control" name="firstName" value="Admin" required>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" class="form-control" name="lastName" value="User" required>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" name="email" value="admin@example.com" required>
                      </div>
                      <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" class="form-control" name="phone" value="1234567890" required>
                      </div>
                      <div class="form-group">
                        <label>Training Center</label>
                        <select class="form-control select2" name="trainingCenter" required>
                          <option value="1" selected>Center 1</option>
                          <option value="2">Center 2</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <button type="submit" class="btn btn-primary">Update Profile</button>
                      </div>
                    </form>
                  </div>

                  <!-- Password Tab -->
                  <div class="tab-pane" id="password">
                    <form id="passwordForm">
                      <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" class="form-control" name="currentPassword" required>
                      </div>
                      <div class="form-group">
                        <label>New Password</label>
                        <input type="password" class="form-control" name="newPassword" required>
                        <div class="password-strength"></div>
                        <div class="password-requirements">
                          <ul>
                            <li class="invalid" data-requirement="length">At least 8 characters long</li>
                            <li class="invalid" data-requirement="uppercase">Contains uppercase letter</li>
                            <li class="invalid" data-requirement="lowercase">Contains lowercase letter</li>
                            <li class="invalid" data-requirement="number">Contains number</li>
                            <li class="invalid" data-requirement="special">Contains special character</li>
                          </ul>
                        </div>
                      </div>
                      <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" class="form-control" name="confirmPassword" required>
                      </div>
                      <div class="form-group">
                        <button type="submit" class="btn btn-primary">Change Password</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- Required Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
$(document).ready(function() {
  // Configure Toastr
  toastr.options = {
    closeButton: true,
    progressBar: true,
    positionClass: "toast-top-right",
    timeOut: 3000
  };

  // Initialize Select2
  $('.select2').select2({
    theme: 'bootstrap4'
  });

  // Change Profile Picture
  $('#changeProfilePic').click(function() {
    // Create file input
    const fileInput = $('<input type="file" accept="image/*" style="display: none;">');
    fileInput.click();

    fileInput.on('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          $('.profile-user-img').attr('src', e.target.result);
          toastr.success('Profile picture updated successfully');
        };
        reader.readAsDataURL(file);
      }
    });
  });

  // Password strength checker
  $('input[name="newPassword"]').on('input', function() {
    const password = $(this).val();
    const strengthBar = $('.password-strength');
    const requirements = $('.password-requirements li');

    // Reset requirements
    requirements.removeClass('valid invalid');

    // Check password requirements
    const checks = {
      length: password.length >= 8,
      uppercase: /[A-Z]/.test(password),
      lowercase: /[a-z]/.test(password),
      number: /[0-9]/.test(password),
      special: /[!@#$%^&*(),.?":{}|<>]/.test(password)
    };

    // Update requirement indicators
    Object.keys(checks).forEach(requirement => {
      const element = $(`[data-requirement="${requirement}"]`);
      if (checks[requirement]) {
        element.addClass('valid').removeClass('invalid');
      } else {
        element.addClass('invalid').removeClass('valid');
      }
    });

    // Calculate strength
    const strength = Object.values(checks).filter(Boolean).length;
    strengthBar.removeClass('weak medium strong very-strong');
    
    if (strength <= 2) {
      strengthBar.addClass('weak');
    } else if (strength <= 3) {
      strengthBar.addClass('medium');
    } else if (strength <= 4) {
      strengthBar.addClass('strong');
    } else {
      strengthBar.addClass('very-strong');
    }
  });

  // Profile Form Submission
  $('#profileForm').on('submit', function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = {
      firstName: $('input[name="firstName"]').val(),
      lastName: $('input[name="lastName"]').val(),
      email: $('input[name="email"]').val(),
      phone: $('input[name="phone"]').val(),
      trainingCenter: $('select[name="trainingCenter"]').val()
    };

    // Validate email format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(formData.email)) {
      toastr.error('Please enter a valid email address');
      return;
    }

    // Validate phone format
    const phoneRegex = /^\d{10}$/;
    if (!phoneRegex.test(formData.phone)) {
      toastr.error('Please enter a valid 10-digit phone number');
      return;
    }

    // Show loading state
    const submitBtn = $(this).find('button[type="submit"]');
    const originalText = submitBtn.html();
    submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Updating...').prop('disabled', true);

    // Simulate server request
    setTimeout(() => {
      // Update profile information
      $('.profile-username').text(`${formData.firstName} ${formData.lastName}`);
      $('.list-group-item a:contains("admin@example.com")').text(formData.email);
      $('.list-group-item a:contains("1234567890")').text(formData.phone);
      $('.list-group-item a:contains("Center 1")').text(formData.trainingCenter === '1' ? 'Center 1' : 'Center 2');

      toastr.success('Profile updated successfully');
      submitBtn.html(originalText).prop('disabled', false);
    }, 1500);
  });

  // Password Form Submission
  $('#passwordForm').on('submit', function(e) {
    e.preventDefault();
    
    const currentPassword = $('input[name="currentPassword"]').val();
    const newPassword = $('input[name="newPassword"]').val();
    const confirmPassword = $('input[name="confirmPassword"]').val();

    // Validate current password (this would be replaced with actual server validation)
    if (currentPassword !== 'password123') {
      toastr.error('Current password is incorrect');
      return;
    }

    // Validate password match
    if (newPassword !== confirmPassword) {
      toastr.error('Passwords do not match');
      return;
    }

    // Validate password strength
    const checks = {
      length: newPassword.length >= 8,
      uppercase: /[A-Z]/.test(newPassword),
      lowercase: /[a-z]/.test(newPassword),
      number: /[0-9]/.test(newPassword),
      special: /[!@#$%^&*(),.?":{}|<>]/.test(newPassword)
    };

    if (Object.values(checks).some(check => !check)) {
      toastr.error('Please meet all password requirements');
      return;
    }

    // Show loading state
    const submitBtn = $(this).find('button[type="submit"]');
    const originalText = submitBtn.html();
    submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Changing...').prop('disabled', true);

    // Simulate server request
    setTimeout(() => {
      toastr.success('Password changed successfully');
      submitBtn.html(originalText).prop('disabled', false);
      this.reset();
    }, 1500);
  });
});
</script>
</body>
</html> 